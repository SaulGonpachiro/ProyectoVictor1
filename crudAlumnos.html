<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MiBOCADILLO - CRUD Alumnos</title>

    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="adminDashboard.css">

    <script src="admin.js"></script>
    <script src="crudAlumnos.js" defer></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            verificarAcceso();
        });
    </script>
</head>

<body class="admin-body">
<header class="admin-navbar">
    <img src="./medios/logoMiBocata.png" alt="Mi Bocata" class="admin-logo-img">

    <nav class="admin-nav-options">
        <a href="adminDashboard.html" class="admin-nav-link">Panel admin</a>
        <a href="crudAlumnos.html" class="admin-nav-link admin-nav-link-active">Alumnos</a>
        <a href="crudBocadillos.html" class="admin-nav-link">Bocadillos</a>
        <a href="crudPedidos.html" class="admin-nav-link">Pedidos</a>
    </nav>

    <button class="admin-logout-btn" onclick="logoutAdmin()">Cerrar sesión</button>
</header>

<main class="admin-content">
    <section class="admin-cards">
        <div class="admin-card crud-wide">
            <h2>Gestión de alumnos</h2>
            <p>Aquí podrás listar, crear, editar y eliminar alumnos.</p>

            <!-- FORMULARIO -->
            <form id="form-alumno" class="crud-form">
                <input type="hidden" id="alumno-nombre-original">

                <div class="form-row">
                    <label for="alumno-nombre">Nombre</label>
                    <input type="text" id="alumno-nombre" required>
                </div>

                <div class="form-row">
                    <label for="alumno-email">Email</label>
                    <input type="email" id="alumno-email" required>
                </div>

                <div class="form-row">
                    <label for="alumno-monedero">Monedero</label>
                    <input type="number" step="0.01" id="alumno-monedero" required>
                </div>

                <div class="form-row">
                    <label for="alumno-curso">Curso</label>
                    <select id="alumno-curso">
                        <option value="">Selecciona un curso</option>

                        <optgroup label="ESO">
                            <option value="1ESO-A">1ESO-A</option>
                            <option value="1ESO-B">1ESO-B</option>
                            <option value="2ESO-A">2ESO-A</option>
                            <option value="2ESO-B">2ESO-B</option>
                            <option value="3ESO-A">3ESO-A</option>
                            <option value="3ESO-B">3ESO-B</option>
                            <option value="4ESO-A">4ESO-A</option>
                            <option value="4ESO-B">4ESO-B</option>
                        </optgroup>

                        <optgroup label="Bachillerato">
                            <option value="1BACH-A">1BACH-A</option>
                            <option value="1BACH-B">1BACH-B</option>
                            <option value="2BACH-A">2BACH-A</option>
                            <option value="2BACH-B">2BACH-B</option>
                        </optgroup>
                    </select>
                </div>

                <div class="form-actions">
                    <button type="submit" class="admin-btn">Guardar</button>
                    <button type="button" class="admin-btn admin-btn-secondary" onclick="limpiarFormularioAlumno()">Limpiar</button>
                </div>

                <p id="alumnos-mensaje"></p>
            </form>

            <!-- FILTROS -->
            <div class="crud-search" style="margin: 25px 0 18px 0; display:flex; gap:15px;">
                
                <!-- Filtro por nombre -->
                <div style="flex:2;">
                    <label style="font-weight:600;">Buscar por nombre</label>
                    <input
                        type="text"
                        id="alumnos-busqueda"
                        placeholder="Escribe un nombre..."
                        style="width:100%; padding:6px 10px; border-radius:6px; border:1px solid #ccc;"
                    >
                </div>

                <!-- Filtro por curso -->
                <div style="flex:1;">
                    <label style="font-weight:600;">Filtrar por curso</label>
                    <select id="alumnos-curso-filtro" style="width:100%; padding:6px 10px; border-radius:6px; border:1px solid #ccc;">
                        <option value="">Todos</option>

                        <option value="1ESO-A">1ESO-A</option>
                        <option value="1ESO-B">1ESO-B</option>
                        <option value="2ESO-A">2ESO-A</option>
                        <option value="2ESO-B">2ESO-B</option>
                        <option value="3ESO-A">3ESO-A</option>
                        <option value="3ESO-B">3ESO-B</option>
                        <option value="4ESO-A">4ESO-A</option>
                        <option value="4ESO-B">4ESO-B</option>

                        <option value="1BACH-A">1BACH-A</option>
                        <option value="1BACH-B">1BACH-B</option>
                        <option value="2BACH-A">2BACH-A</option>
                        <option value="2BACH-B">2BACH-B</option>
                    </select>
                </div>
            </div>

            <!-- LISTADO -->
            <div id="crud-alumnos-listado" class="crud-table-wrapper">
                <table class="tabla-admin">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Monedero</th>
                            <th>Curso</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tbody-alumnos">
                        <!-- Rellenado por JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>
</main>
</body>
</html>
